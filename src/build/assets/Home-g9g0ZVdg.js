import{u as o,a as x,j as e,M as C,B as S,s as u,r as d,b as k,c as M,d as m,e as D,f as U,L as B,g as I,h as P,i as z}from"./index-hPQDWh1f.js";import{B as c,I as A}from"./Input-YbagX5ZB.js";const E=({open:l,children:s,handleClose:t,handleClick:i})=>e.jsx(C,{open:l,onClose:t,children:e.jsxs(S,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",bgcolor:"background.paper",boxShadow:24,p:4},children:[e.jsx("div",{className:"overflow-scroll w-full h-[500px]",children:s}),e.jsxs("div",{className:"flex mt-5 flex-row items-center justify-start",children:[e.jsx(c,{onClick:t,variant:"contained",color:"primary",children:"Close"}),e.jsx(c,{onClick:i,variant:"contained",color:"primary",sx:{ml:2},children:"Save"})]})]})}),T=({children:l,handleClick:s})=>{const t=o(r=>r.modal.show),i=x(),n=()=>{i(u({show:!1}))};return e.jsx("div",{children:e.jsx(E,{open:t,handleClick:s,handleClose:n,children:l})})},V=()=>{const l=d.useRef(null),s=x(),t=o(a=>a.file.update),i=o(a=>a.file.file),[n,r]=d.useState(null),[v,h]=d.useState(null);d.useEffect(()=>{var a;t&&((a=l==null?void 0:l.current)==null||a.click())},[t]);const N=a=>{var j;const p=(j=a.target.files)==null?void 0:j[0];if(r(p||null),p){const f=new FileReader;f.onload=y=>{var w;const b=(w=y.target)==null?void 0:w.result;h(b),g()},f.readAsText(p)}else h(null)},F=()=>{if(n)if(n.type==="text/plain")if(n.size<=300*1024){const a=new FormData;a.append("file",n),s(t?k(a,i):M(a)),s(u({show:!1})),r(null),h(null)}else s(m({message:"File size exceeds the limit. Please upload a file smaller than 300 KB.",show:!0,status:"error"}));else s(m({message:"Invalid file type. Please upload a text file (txt).",show:!0,status:"error"}));else s(m({message:"Please select a file to upload.",show:!0,status:"error"}))},g=()=>{s(u({show:!0}))};return e.jsxs("div",{children:[e.jsx(A,{id:"contained-button-file",type:"file",onChange:N,style:{display:"none"}}),e.jsx("label",{htmlFor:"contained-button-file",children:e.jsx(c,{ref:l,variant:"contained",component:"span",children:"Upload file"})}),e.jsx(T,{handleClick:F,children:e.jsxs("div",{children:[e.jsx("h1",{children:"File Preview:"}),e.jsx("pre",{children:v})]})})]})},H=V,L=D(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),R=({originalName:l,id:s})=>{const t=x(),i=n=>{t(I(n))};return e.jsxs("div",{className:"flex flex-row border-gray-200 px-1 md:px-4 rounded-lg py-2 border my-2  items-center",children:[e.jsx("div",{className:"w-1/4",children:e.jsx("span",{className:"md:text-xl text-xs",children:l})}),e.jsx("div",{className:"w-1/4 line-clamp-2",children:e.jsx("span",{className:"md:text-xl text-xs",children:s})}),e.jsxs("div",{className:"w-1/4 text-center",children:[e.jsx(c,{onClick:()=>i(s),children:"Update"}),e.jsx(c,{variant:"contained",onClick:()=>{t(U(s))},color:"error",children:e.jsx(L,{})})]}),e.jsx("div",{className:"w-1/4 text-end",children:e.jsx(B,{to:`/file/${s}`,children:e.jsx(c,{children:"View"})})})]})},$=({rows:l})=>e.jsx("div",{className:"shadow-lg p-2 md:p-5 my-10 rounded-lg",children:l.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row border border-gray-200 px-1 md:px-4 rounded-lg py-2 items-center justify-between",children:[e.jsx("div",{className:"w-1/4",children:e.jsx("span",{className:"md:text-xl text-xs",children:"File Name"})}),e.jsx("div",{className:"w-1/4",children:e.jsx("span",{className:"md:text-xl text-xs",children:"File Id"})}),e.jsx("div",{className:"w-1/4 text-center",children:e.jsx("span",{className:"md:text-xl text-xs",children:"Actions"})}),e.jsx("div",{className:"w-1/4 text-end",children:e.jsx("span",{className:"md:text-xl text-xs",children:"View File"})})]}),l.map(s=>e.jsx(R,{...s},s.id))]}):e.jsx("div",{className:"p-10 flex items-center justify-center",children:e.jsx("span",{children:"No Files Found Please upload one"})})}),K=$;function G(){const l=o(t=>t.file.files),s=x();return d.useEffect(()=>{s(P())},[]),e.jsx(z,{children:e.jsxs("div",{className:"w-[95%] md:w-[80%] md:m-auto",children:[e.jsx(H,{}),e.jsx("div",{className:"mt-10",children:e.jsx(K,{rows:l})})]})})}export{G as default};
